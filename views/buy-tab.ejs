<div id="buyContent" class="tab-content hidden">
    <div class="w-full max-w-screen-xl px-4 py-12 mx-auto lg:px-12">
        <div class="relative overflow-hidden bg-white shadow-md rounded-lg border border-gray-200">
            <div class="flex flex-row items-center justify-between p-4 space-x-4">
                <div>
                    <h5 class="text-xl font-semibold text-gray-900 mb-2">Vendors' Invoices</h5>
                    <p class="text-gray-500 text-sm">Manage all your existing invoices or create a new one</p>
                </div>
                <button id="new-btn" onclick="showSidebar()" type="button"
                    class="flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 rounded-lg focus:ring-4 focus:ring-purple-300">
                    <svg xmlns="http://www.w3.org/2000/svg" class="size-6 mr-2 -ml-1" fill="none" viewBox="0 0 24 24"
                        stroke="currentColor" stroke-width="1.5">
                        <path stroke-linecap="round" stroke-linejoin="round"
                            d="M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z" />
                    </svg>
                    New Invoice
                </button>
            </div>
        </div>
    </div>
    <hr class="my-5">
    <!-- Buy Form -->
    <form id="vendorForm" method="POST" action="/api/vendor-invoices" class="flex flex-col pt-4 px-12">
        <div class="grid grid-cols-1 md:grid-cols-2 my-2">
            <!-- Name -->
            <div class="flex flex-col col-span-1 mr-8" id="name">
                <label class=" label-red my-1 text-gray-500 font-semibold required" for="name">Curstomer
                    name</label>
                <input
                    class="capitalize-input border-[.2px] border-gray-300 py-1 md:py-2 px-4 rounded focus:outline-purple-400"
                    type="text" name="name" autocapitalize="words" required>
                <span class="error text-red-500 text-[12px] ml-2 mt-1"></span>
            </div>
            <!-- Father Name -->
            <div class="flex flex-col col-span-1 mr-8" id="father_name">
                <label class=" label-red my-1 text-gray-500 font-semibold required" for="father_name">Father
                    name</label>
                <input
                    class="capitalize-input border-[.2px] border-gray-300 py-1 md:py-2 px-4 rounded focus:outline-purple-400"
                    type="text" name="father_name" autocapitalize="words" required>
                <span class="error text-red-500 text-[12px] ml-2 mt-1"></span>
            </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 border-b-[1px] border-b-gray-200 py-3 my-2">
            <!-- Contact -->
            <div class="flex flex-col col-span-1 mr-8" id="contact">
                <label class="label-red my-1 text-gray-500 font-semibold required" for="contact">Contact</label>
                <input class="border-[.2px] border-gray-300 py-1 md:py-2 px-4 rounded focus:outline-purple-400"
                    type="number" name="contact" required>
                <span class="error text-red-500 text-[12px] ml-2 mt-1"></span>
            </div>
            <!-- CNIC -->
            <div class="flex flex-col col-span-1 mr-8" id="cnic">
                <label class=" label-red my-1 text-gray-500 font-semibold required" for="cnic">CNIC</label>
                <input class="border-[.2px] border-gray-300 py-1 md:py-2 px-4 rounded focus:outline-purple-400"
                    type="number" name="cnic" required>
                <span class="error text-red-500 text-[12px] ml-2 mt-1"></span>
            </div>
        </div>
        <!-- Product -->
        <div class="flex flex-col my-2" id="product">
            <label class="my-1 text-gray-500 font-semibold required" for="product">Product Name</label>
            <input
                class="capitalize-input border-[.2px] border-gray-300 py-1 md:py-2 px-4 rounded focus:outline-purple-400"
                type="text" name="product" required>
            <span class="error text-red-500 text-[12px] ml-2 mt-1"></span>
        </div>

        <!-- Quantity -->
        <div class="flex flex-col my-2" id="quantity">
            <label class="my-1 text-gray-500 font-semibold required" for="quantity">Quantity</label>
            <input class="border-[.2px] border-gray-300 py-1 md:py-2 px-4 rounded focus:outline-purple-400"
                type="number" name="quantity" required value="0">
            <span class="error text-red-500 text-[12px] ml-2 mt-1"></span>
        </div>

        <!-- Price per Unit -->
        <div class="flex flex-col my-2" id="pricePerUnit">
            <label class="my-1 text-gray-500 font-semibold required" for="pricePerUnit">Price Per Unit</label>
            <input class="border-[.2px] border-gray-300 py-1 md:py-2 px-4 rounded focus:outline-purple-400"
                type="number" name="pricePerUnit" required value="0">
            <span class="error text-red-500 text-[12px] ml-2 mt-1"></span>
        </div>

        <!-- Total Price -->
        <div class="flex flex-col my-2" id="totalPrice">
            <label class="my-1 text-gray-500 font-semibold required" for="totalPrice">Total Price</label>
            <input class="border-[.2px] border-gray-300 py-1 md:py-2 px-4 rounded focus:outline-purple-400"
                type="number" name="totalPrice" required readonly>
            <span class="error text-red-500 text-[12px] ml-2 mt-1"></span>
        </div>

        <!-- Submit Button -->
        <div class="flex justify-start my-4">
            <button type="submit"
                class="bg-purple-500 text-white py-2 px-4 rounded-md hover:bg-purple-600">Submit</button>
        </div>
    </form>

    <!-- Fetching invoices -->
    <% vendorInvoices.forEach(({_id, name, product, quantity, totalPrice, updatedAt })=> {
        const date = new Date(updatedAt);
        const formattedDate = `${date.getDate().toString().padStart(2, "0")}-${(date.getMonth() + 1)
        .toString()
        .padStart(2, "0")}-${date.getFullYear()}`;
        %>
        <div data-id="<%= _id %>"
            class=" flex flex-row items-center justify-between border border-gray-200 hover:border-purple-500 cursor-pointer rounded-lg my-4 py-6 px-4 bg-white gap-7">
            <div class="flex flex-col md:flex-row gap-3 md:gap-12 items-center justify-center">
                <p class="text-gray-400 text-sm lg:text-sm">
                    <%= formattedDate %>
                </p>
                <p class="text-gray-400 text-sm lg:text-sm capitalize">
                    <%= name %>
                </p>
                <p class="text-gray-400 text-sm lg:text-sm capitalize">
                    <%= product %>
                </p>
            </div>
            <div class="flex flex-col md:flex-row gap-3 md:gap-12 items-center justify-center">
                <p class="text-gray-400 text-sm lg:text-sm capitalize">
                    <%= quantity %> Kg
                </p>
                <p class="text-gray-400 text-sm lg:text-sm"><b>Rs.<%= totalPrice %></b></p>
                <svg class="svgicon" width="7" height="10" xmlns="http://www.w3.org/2000/svg">
                    <path d="M1 1l4 4-4 4" stroke="#7C5DFA" stroke-width="2" fill="none" fill-rule="evenodd" />
                </svg>
            </div>
        </div>
        <% }); %>


</div>